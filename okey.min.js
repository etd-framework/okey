if(!exports)var exports={};!function(e,t){"use strict";function s(e,t,s,o){return e.slice(0,t)+(o||"")+e.slice(t+s)}function o(e){return-1!=["text","search","URL","tel","password"].indexOf(e)}function i(){document.dispatchEvent(new CustomEvent("keyboard-open"))}function a(){document.dispatchEvent(new CustomEvent("keyboard-close"))}function n(e,i){function a(e,t){var e=new KeyboardEvent(e,{key:t.symbol,code:"Key"+t.symbol,keyCode:t.symbol.charCodeAt(0),which:t.symbol.charCodeAt(0),altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1});e.virtual=!0,i.dispatchEvent(e)}this.Keyboard=e,i.layout=t.Keyboard.layout[i.type]?i.type:"_default",this.onEvent=function(e){a("keydown",e),a("keypress",e),a("keyup",e)},this.keydownfunc=function(e){if(e.virtual){e.preventDefault();var t=o(this.type);if("backspace"!=e.key){if(!(this.value.length>=this.maxLength&&-1!=this.maxLength)){var a=e.key||String.fromCharCode(e.keyCode);if(("sentence"===e.target.dataset["case"]&&(0===this.value.length||"."===this.value.slice(-1)||". "===this.value.slice(-2))||"capitalize"===e.target.dataset["case"]&&" "===this.value.slice(-1))&&(a=a.toUpperCase()),t){var n=i.selectionStart+a.length;this.value=s(this.value,i.selectionStart,i.selectionEnd-i.selectionStart,a),this.setSelectionRange(n,n)}else this.value+=a;this.scrollLeft=this.scrollWidth}}else if(t){var n=i.selectionStart,l=i.selectionEnd-i.selectionStart?0:1;this.value=this.value.substring(0,i.selectionStart-l)+this.value.slice(i.selectionEnd),this.setSelectionRange(n-l,n-l)}else this.value=this.value.slice(0,-1)}},i.addEventListener("focus",this.focus.bind(this)),i.addEventListener("blur",this.blur.bind(this)),i.addEventListener("keydown",this.keydownfunc)}function l(e,s){var o=this;Array.prototype.slice.call(e,0).forEach(function(e){e.Keyboard=new n(o,e)}),this.active=!1,this.listeners={key:[]},this.keyboardEl=null,this.layout=null,this.keyboardEl=document.createElement("div"),this.keyboardEl.classList.add("keyboard-container"),this.keyboardEl.addEventListener("mousedown",r.bind(this)),this.keyboardEl.addEventListener("mouseup",d.bind(this)),this.keyboardEl.addEventListener("touchstart",r.bind(this)),this.keyboardEl.addEventListener("touchend",d.bind(this)),this.show=function(e){function a(e,t){function s(e,t){var s=document.createElement("div");s.classList.add("keyboard-key"),s.classList.add("keyboard-key--"+t);for(var o in e)switch(o){case"symbol":e.label||(s.innerHTML=e[o]),s.dataset.symbol=e[o];break;case"label":s.innerHTML=e[o];break;default:s.dataset[o]=e[o]}i.appendChild(s)}var i=document.createElement("div");i.classList.add("keyboard-row"),i.classList.add("keyboard-row--"+t),e.forEach(s),o.keyboardEl.appendChild(i)}if(!t.Keyboard.layout[e])throw new Error("keyboard initiation: Missing layout: "+e);if(!o.layout||e!==o.layout||!this.active){this.active=!0,o.layout=e,this.keyboardEl.innerHTML="",this.keyboardEl.classList.remove("keyboard-container-hidden");var n=document.createElement("span");n.classList.add("keyboard-close-button"),n.innerHTML="✖",this.keyboardEl.appendChild(n),n.onclick=function(){document.activeElement.blur()}.bind(this),n.ontouchstart=function(){document.activeElement.blur()}.bind(this),t.Keyboard.layout[o.layout].forEach(a),i(),s.appendChild(o.keyboardEl)}},this.hide=function(){o.active=!1,a(),setTimeout(function(){o.active||(o.keyboardEl.classList.add("keyboard-container-hidden"),o.keyboardEl.innerHTML="")},25)},this.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},this.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(function(e){return t.toString()!==e.toString()}))},this.add=function(e){Array.isArray(e)||(e=[e]),Array.prototype.slice.call(e,0).forEach(function(e){e.Keyboard=new n(o,e)})}}n.prototype.focus=function(e){this.Keyboard.show(e.target.layout),this.Keyboard.on("key",this.onEvent)},n.prototype.blur=function(e){this.Keyboard.hide(e.target.layout),this.Keyboard.off("key",this.onEvent)};var r=function(e){var t=this;if(e.preventDefault(),e.target.classList.contains("keyboard-key")){e.target.classList.add("active");var s=e.target.dataset;t.listeners.key.forEach(function(e){e(s)}),t.keyHoldTimeout=window.setTimeout(function(){t.keyHoldInterval=window.setInterval(function(){t.listeners.key.forEach(function(e){e(s)})},100)},400)}},d=function(e){e.target.classList.remove("active"),this.keyHoldTimeout&&window.clearTimeout(this.keyHoldTimeout),this.keyHoldInterval&&window.clearInterval(this.keyHoldInterval)};t.Keyboard=l,t.Keyboard.layout={_default:[[{symbol:"Q"},{symbol:"W"},{symbol:"E"},{symbol:"R"},{symbol:"T"},{symbol:"Y"},{symbol:"U"},{symbol:"I"},{symbol:"O"},{symbol:"P"},{label:".com",symbol:".COM"},{symbol:"7"},{symbol:"8"},{symbol:"9"},{label:"⇦",symbol:"backspace"}],[{symbol:"A"},{symbol:"S"},{symbol:"D"},{symbol:"F"},{symbol:"G"},{symbol:"H"},{symbol:"J"},{symbol:"K"},{symbol:"L"},{symbol:"@"},{label:".net",symbol:".NET"},{symbol:"4"},{symbol:"5"},{symbol:"6"}],[{symbol:"Z"},{symbol:"X"},{symbol:"C"},{symbol:"V"},{symbol:"B"},{symbol:"N"},{symbol:"M"},{symbol:"."},{symbol:"_"},{symbol:"-"},{symbol:" ",label:"space"},{symbol:"0"},{symbol:"1"},{symbol:"2"},{symbol:"3"}]]}}(exports||{},window);